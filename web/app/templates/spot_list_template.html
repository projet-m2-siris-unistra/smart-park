<!-- Menu display choice -->
<div data-tabs class="zone-config-menu bx--tabs">

    <div class="bx--tabs-trigger" tabindex="0">
      <a href="javascript:void(0)" class="bx--tabs-trigger-text" tabindex="-1"></a>
      <svg focusable="false" preserveAspectRatio="xMidYMid meet" style="will-change: transform;" xmlns="http://www.w3.org/2000/svg" width="10" height="6" viewBox="0 0 10 6" aria-hidden="true"><path d="M5 6L0 1 0.7 0.3 5 4.6 9.3 0.3 10 1z"></path></svg>
    </div>

    <ul class="bx--tabs__nav bx--tabs__nav--hidden" role="tablist">
      <li class="bx--tabs__nav-item {% if tab_map %}bx--tabs__nav-item--selected{% endif %} " data-target=".tab-1" role="tab" aria-selected="true" >
        <a tabindex="0" id="tab-link-1" class="bx--tabs__nav-link" href="{{ url_for("zones.spots", zone_id=zone_id )}}" role="tab" aria-controls="tab-panel-1">Carte</a>
      </li>

      <li class="bx--tabs__nav-item {% if tab_map == False %}bx--tabs__nav-item--selected{% endif %}" data-target=".tab-2" role="tab" >
        <a tabindex="0" id="tab-link-2" class="bx--tabs__nav-link" href="{{ url_for("zones.spots", zone_id=zone_id, type="table" )}}" role="tab" aria-controls="tab-panel-2">Table</a>
      </li>
    </ul>
</div>


{% if tab_map %}
    <div id='map' class="spot-list-map">
        <h4>Carte des places</h4>
        <br>
    </div>

    <script type="text/javascript">
        window.spots = {{ spotList | safe }};
        window.polygon = {{ zoneInstance.polygon | tojson }};
        window.color = "{{ zoneInstance.color }}";
        window.tenantCoor = {{ tenantInstance.coordinates }};
        window.zone_id = {{ zone_id }};
    </script>

    <script type="text/javascript" src="/static/js/map_create_map.js"></script>
    <script type="text/javascript" src="/static/js/map_polygon_draw.js"></script>
    <script type="text/javascript" src="/static/js/map_spot_list.js"></script>


{% else %}


<!-- DATA TABLE -->

<!--
  Copyright IBM Corp. 2016, 2018

  This source code is licensed under the Apache-2.0 license found in the
  LICENSE file in the root directory of this source tree.
-->
<!-- v10 Data Table -->
<div class="bx--data-table-container zone-div" data-table>
    <div class="bx--data-table-header">
      <h4 class="bx--data-table-header__title">Table des places</h4>
      <p class="bx--data-table-header__description"></p>
    </div>

  <!-- Table -->
    <table class="bx--data-table  bx--data-table--sort  " >
    <thead>

    <tr>
        <th >
            <!-- checkbox th -->
            <!-- sortable th  -->
            <button class="bx--table-sort" data-event="sort" title="Name">
                <span class="bx--table-header-label">Nom</span>
                <svg focusable="false" preserveAspectRatio="xMidYMid meet" style="will-change: transform;" xmlns="http://www.w3.org/2000/svg" class="bx--table-sort__icon" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><path d="M12.3 9.3L8.5 13.1 8.5 1 7.5 1 7.5 13.1 3.7 9.3 3 10 8 15 13 10z"></path></svg>
                <svg focusable="false" preserveAspectRatio="xMidYMid meet" style="will-change: transform;" xmlns="http://www.w3.org/2000/svg" class="bx--table-sort__icon-unsorted" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><path d="M13.8 10.3L12 12.1 12 2 11 2 11 12.1 9.2 10.3 8.5 11 11.5 14 14.5 11zM4.5 2L1.5 5 2.2 5.7 4 3.9 4 14 5 14 5 3.9 6.8 5.7 7.5 5z"></path></svg>
            </button>
            <!-- no sort th -->
        </th>
        <th >
            <!-- checkbox th -->
            <!-- sortable th  -->
                <button class="bx--table-sort" data-event="sort" title="State">
                <span class="bx--table-header-label">État</span>
                <svg focusable="false" preserveAspectRatio="xMidYMid meet" style="will-change: transform;" xmlns="http://www.w3.org/2000/svg" class="bx--table-sort__icon" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><path d="M12.3 9.3L8.5 13.1 8.5 1 7.5 1 7.5 13.1 3.7 9.3 3 10 8 15 13 10z"></path></svg>
                <svg focusable="false" preserveAspectRatio="xMidYMid meet" style="will-change: transform;" xmlns="http://www.w3.org/2000/svg" class="bx--table-sort__icon-unsorted" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><path d="M13.8 10.3L12 12.1 12 2 11 2 11 12.1 9.2 10.3 8.5 11 11.5 14 14.5 11zM4.5 2L1.5 5 2.2 5.7 4 3.9 4 14 5 14 5 3.9 6.8 5.7 7.5 5z"></path></svg>
                </button>
            <!-- no sort th -->
        </th>
        <th >
            <!-- checkbox th -->
            <!-- sortable th  -->
                <button class="bx--table-sort" data-event="sort" title="Battery">
                <span class="bx--table-header-label">Batterie</span>
                <svg focusable="false" preserveAspectRatio="xMidYMid meet" style="will-change: transform;" xmlns="http://www.w3.org/2000/svg" class="bx--table-sort__icon" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><path d="M12.3 9.3L8.5 13.1 8.5 1 7.5 1 7.5 13.1 3.7 9.3 3 10 8 15 13 10z"></path></svg>
                <svg focusable="false" preserveAspectRatio="xMidYMid meet" style="will-change: transform;" xmlns="http://www.w3.org/2000/svg" class="bx--table-sort__icon-unsorted" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><path d="M13.8 10.3L12 12.1 12 2 11 2 11 12.1 9.2 10.3 8.5 11 11.5 14 14.5 11zM4.5 2L1.5 5 2.2 5.7 4 3.9 4 14 5 14 5 3.9 6.8 5.7 7.5 5z"></path></svg>
                </button>
            <!-- no sort th -->
        </th>
        <th  class="bx--table-column-menu">
            <!-- checkbox th -->
        </th>
    </tr>
    </thead>
    <tbody>
      
        {% for item in zoneInstance.spots %}
            {% include "spot_element.html" %}
        {% endfor %}

    </tbody>
  </table>

    <!-- Pagination -->
    <div class="bx--pagination" data-pagination>
        <div class="bx--pagination__left">
    
          <!-- items per page (limit) -->
          <label
              id="select-id-pagination-count-label"
              class="bx--pagination__text"
              for="select-id-pagination-count"
          >
              Élements par page:
          </label>
          <div class="bx--select bx--select--inline bx--select__item-count">
              <form method="GET" id="pagesize-form" name="pagesize-form">
                  <select
                  class="bx--select-input"
                  id="pagesize"
                  name="pagesize"
                  aria-label="select number of items per page"
                  tabindex="0"
                  data-items-per-page>
                  <option class="bx--select-option" value="20" {% if pagination.page_size == 20 %}selected{% endif %}>20</option>
                  <option class="bx--select-option" value="30" {% if pagination.page_size == 30 %}selected{% endif %}>30</option>
                  <option class="bx--select-option" value="40" {% if pagination.page_size == 40 %}selected{% endif %}>40</option>
                  <option class="bx--select-option" value="50" {% if pagination.page_size == 50 %}selected{% endif %}>50</option>
                  </select>
              </form>
              <svg focusable="false" preserveAspectRatio="xMidYMid meet" style="will-change: transform;" xmlns="http://www.w3.org/2000/svg" class="bx--select__arrow" width="10" height="6" viewBox="0 0 10 6" aria-hidden="true"><path d="M5 6L0 1 0.7 0.3 5 4.6 9.3 0.3 10 1z"></path></svg>
          </div>
    
          <!-- Pagination informations -->
          <span class="bx--pagination__text">
              <span data-displayed-item-range>{{ pagination.page_size*(pagination.page_number-1) + 1 }}-{{ (pagination.page_size*pagination.page_number) }}</span> de
              <span data-total-items>{{ pagination.elements_number }}</span> éléments
          </span>
      </div>
    
      <!-- Page selection (offset) -->
      <div class="bx--pagination__right">
          <div class="bx--select bx--select--inline bx--select__page-number">
              <form name="page-form" id="page-form" method="GET">
                  <select
                  class="bx--select-input"
                  id="page"
                  name="page"
                  aria-label="select page number to view"
                  tabindex="0"
                  onchange="submit_offset()"
                  data-page-number-input>
                      {% for i in range (1, pagination.max_pages+1) %}
                          {% if i == pagination.page_number %}
                              <option class="bx--select-option" value="{{ i }}" selected>{{ i }}</option>
                          {% else %}
                              <option class="bx--select-option" value="{{ i }}">{{ i }}</option>
                          {% endif %}
                      {% endfor %}
                  </select>
              </form>
              <svg focusable="false" preserveAspectRatio="xMidYMid meet" style="will-change: transform;" xmlns="http://www.w3.org/2000/svg" class="bx--select__arrow" width="10" height="6" viewBox="0 0 10 6" aria-hidden="true"><path d="M5 6L0 1 0.7 0.3 5 4.6 9.3 0.3 10 1z"></path></svg>
          </div>
    
          <label id="select-id-pagination-page-label" class="bx--pagination__text" for="select-id-pagination-page">
              sur {{ pagination.max_pages }} pages
          </label>
    
          <!-- Page navigation buttons -->
          {% if pagination.page_number > 1 %}
              <a href="{{ url_for("zones.spots", zone_id=zone_id, type="table", page=pagination.page_number-1 )}}" class="bx--pagination__button bx--pagination__button--backward" tabindex="0" data-page-backward aria-label="Backward button">
                  <svg focusable="false" preserveAspectRatio="xMidYMid meet" style="will-change: transform;" xmlns="http://www.w3.org/2000/svg" class="bx--pagination__nav-arrow" width="20" height="20" viewBox="0 0 32 32" aria-hidden="true"><path d="M19 23L11 16 19 9 19 23z"></path></svg>
              </a>
          {% endif %}
          {% if pagination.page_number < pagination.max_pages %}
              <a href="{{ url_for("zones.spots", zone_id=zone_id, type="table", page=pagination.page_number+1 )}}" class="bx--pagination__button bx--pagination__button--forward" tabindex="0" data-page-forward aria-label="Forward button">
                  <svg focusable="false" preserveAspectRatio="xMidYMid meet" style="will-change: transform;" xmlns="http://www.w3.org/2000/svg" class="bx--pagination__nav-arrow" width="20" height="20" viewBox="0 0 32 32" aria-hidden="true"><path d="M13 9L21 16 13 23 13 9z"></path></svg>
              </a>
          {% endif %}
        </div>
    
    </div>
      <!-- End pagination -->

</div>

<script src="text/javascript" src="/static/js/pagination.js"></script>

{% endif %}